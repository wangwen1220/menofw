!function(e){!!window.ActiveXObject&&!window.XMLHttpRequest;e(function(){var s=(e("html"),e("#header"),e("#search")),n=e("#main"),i=(e("#mask"),e("#categories")),t=e("#cart"),a=e("#js-loading");if("undefined"!=typeof FastClick&&"undefined"!=typeof document.body&&FastClick.attach(document.body),s.data("$hidden",s.find(".js-hide")).on("focusin click",".js-key",function(){n.hasClass("js-hide")||(this.focus(),this.value="",s.siblings().addClass("js-hide"),s.data("$hidden").removeClass("js-hide"),s.find(".search-hot").hide())}).on("click",".js-cancel",function(){s.find(".js-key").val(""),s.find(".js-keylist").empty(),s.siblings().removeClass("js-hide"),s.data("$hidden").addClass("js-hide"),s.find(".search-hot").show()}).on("click",".js-clear",function(){s.find(".js-key").val("").focus(),s.find(".js-keylist").empty()}).on("keyup",".js-key",function(){var n=s.children("form").attr("action"),i=e.trim(s.find(".js-key").val()),t=s.find(".js-keylist");return i?(e.get(n,{key:i},function(s){var n=e.map(s,function(e){return e.suggestion}).join("");t.html(n)},"json"),void 0):(s.find(".js-keylist").empty(),void 0)}),e("#search-footer").on("click",".search-trigger",function(){s.find(".js-key").trigger("focusin")}),i.find(".slider").swipe({continuous:!1,callback:function(s,n){var i=e(n.parentNode.parentNode),t=i.next(".nav"),a=i.data("swipe"),d=a.getNumSlides();0===s?t.addClass("next").removeClass("prev"):s===d-1&&t.addClass("prev").removeClass("next")}}),i.on("click",".slider-wrap > .nav",function(){var s=e(this),n=s.prev().data("swipe");n[s.hasClass("next")?"next":"prev"]()}),i.children(".viewmore").on("click",function(){var s=e(this);s.hasClass("unfold")?s.text("All Categories").removeClass("unfold").prev().addClass("js-hide"):s.text("Hide Up").addClass("unfold").prev().removeClass("js-hide")}),t.on("click",".js-close",function(){return e(this.parentNode).addClass("fold"),!1}),n.find(".js-slider").swipe({auto:3e3}),n.on("click",".search-result .actions .fold",function(){e(this).parents("section").toggleClass("unfold")}),n.on("click",".search-result .actions .cart",function(){var s=e(this),n=s.data("url"),i=t.find(".counter"),a=parseInt(i.text(),10);s.hasClass("added")?e.getJSON(n,{action:"del"},function(e){"success"===e.status&&(i.text(--a),s.removeClass("added"))}):e.getJSON(n,{action:"add"},function(e){"success"===e.status&&(i.text(++a),s.addClass("added"))})}),n.find(".search-result > .w-title").prev("section").addClass("nobd"),a.length){return new Spinner({lines:17,length:0,width:3,radius:5,corners:0,rotate:0,direction:1,color:"#555",speed:1,trail:100,shadow:!1,hwaccel:!1,className:"spinner",zIndex:0,top:"50%",left:"50%"}).spin(e("<i/>").prependTo(a)[0]),void 0}})}(window.Zepto||window.jQuery);